e0fc8a1eae0f2bcd380b1c7a0baeff7a
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _EventEmitter = _interopRequireDefault(require("../vendor/emitter/EventEmitter"));

var _RCTDeviceEventEmitter = _interopRequireDefault(require("../EventEmitter/RCTDeviceEventEmitter"));

var _NativeDeviceInfo = _interopRequireDefault(require("./NativeDeviceInfo"));

var _invariant = _interopRequireDefault(require("invariant"));

var eventEmitter = new _EventEmitter.default();
var dimensionsInitialized = false;
var dimensions;

var Dimensions = function () {
  function Dimensions() {
    (0, _classCallCheck2.default)(this, Dimensions);
  }

  (0, _createClass2.default)(Dimensions, null, [{
    key: "get",
    value: function get(dim) {
      (0, _invariant.default)(dimensions[dim], 'No dimension set for key ' + dim);
      return dimensions[dim];
    }
  }, {
    key: "set",
    value: function set(dims) {
      var screen = dims.screen,
          window = dims.window;
      var windowPhysicalPixels = dims.windowPhysicalPixels;

      if (windowPhysicalPixels) {
        window = {
          width: windowPhysicalPixels.width / windowPhysicalPixels.scale,
          height: windowPhysicalPixels.height / windowPhysicalPixels.scale,
          scale: windowPhysicalPixels.scale,
          fontScale: windowPhysicalPixels.fontScale
        };
      }

      var screenPhysicalPixels = dims.screenPhysicalPixels;

      if (screenPhysicalPixels) {
        screen = {
          width: screenPhysicalPixels.width / screenPhysicalPixels.scale,
          height: screenPhysicalPixels.height / screenPhysicalPixels.scale,
          scale: screenPhysicalPixels.scale,
          fontScale: screenPhysicalPixels.fontScale
        };
      } else if (screen == null) {
        screen = window;
      }

      dimensions = {
        window: window,
        screen: screen
      };

      if (dimensionsInitialized) {
        eventEmitter.emit('change', dimensions);
      } else {
        dimensionsInitialized = true;
      }
    }
  }, {
    key: "addEventListener",
    value: function addEventListener(type, handler) {
      (0, _invariant.default)(type === 'change', 'Trying to subscribe to unknown event: "%s"', type);
      eventEmitter.addListener(type, handler);
    }
  }, {
    key: "removeEventListener",
    value: function removeEventListener(type, handler) {
      (0, _invariant.default)(type === 'change', 'Trying to remove listener for unknown event: "%s"', type);
      eventEmitter.removeListener(type, handler);
    }
  }]);
  return Dimensions;
}();

var initialDims = global.nativeExtensions && global.nativeExtensions.DeviceInfo && global.nativeExtensions.DeviceInfo.Dimensions;

if (!initialDims) {
  _RCTDeviceEventEmitter.default.addListener('didUpdateDimensions', function (update) {
    Dimensions.set(update);
  });

  initialDims = _NativeDeviceInfo.default.getConstants().Dimensions;
}

Dimensions.set(initialDims);
module.exports = Dimensions;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRpbWVuc2lvbnMuanMiXSwibmFtZXMiOlsiZXZlbnRFbWl0dGVyIiwiRXZlbnRFbWl0dGVyIiwiZGltZW5zaW9uc0luaXRpYWxpemVkIiwiZGltZW5zaW9ucyIsIkRpbWVuc2lvbnMiLCJkaW0iLCJkaW1zIiwic2NyZWVuIiwid2luZG93Iiwid2luZG93UGh5c2ljYWxQaXhlbHMiLCJ3aWR0aCIsInNjYWxlIiwiaGVpZ2h0IiwiZm9udFNjYWxlIiwic2NyZWVuUGh5c2ljYWxQaXhlbHMiLCJlbWl0IiwidHlwZSIsImhhbmRsZXIiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiaW5pdGlhbERpbXMiLCJnbG9iYWwiLCJuYXRpdmVFeHRlbnNpb25zIiwiRGV2aWNlSW5mbyIsIlJDVERldmljZUV2ZW50RW1pdHRlciIsInVwZGF0ZSIsInNldCIsIk5hdGl2ZURldmljZUluZm8iLCJnZXRDb25zdGFudHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFVQTs7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7QUFJQTs7QUFRQSxJQUFNQSxZQUFZLEdBQUcsSUFBSUMscUJBQUosRUFBckI7QUFDQSxJQUFJQyxxQkFBcUIsR0FBRyxLQUE1QjtBQUNBLElBQUlDLFVBQUo7O0lBRU1DLFU7Ozs7Ozs7d0JBa0JPQyxHLEVBQXFCO0FBQzlCLDhCQUFVRixVQUFVLENBQUNFLEdBQUQsQ0FBcEIsRUFBMkIsOEJBQThCQSxHQUF6RDtBQUNBLGFBQU9GLFVBQVUsQ0FBQ0UsR0FBRCxDQUFqQjtBQUNEOzs7d0JBUVVDLEksRUFBa0Q7QUFBQSxVQUl0REMsTUFKc0QsR0FJcENELElBSm9DLENBSXREQyxNQUpzRDtBQUFBLFVBSTlDQyxNQUo4QyxHQUlwQ0YsSUFKb0MsQ0FJOUNFLE1BSjhDO0FBQUEsVUFLcERDLG9CQUxvRCxHQUs1QkgsSUFMNEIsQ0FLcERHLG9CQUxvRDs7QUFNM0QsVUFBSUEsb0JBQUosRUFBMEI7QUFDeEJELFFBQUFBLE1BQU0sR0FBRztBQUNQRSxVQUFBQSxLQUFLLEVBQUVELG9CQUFvQixDQUFDQyxLQUFyQixHQUE2QkQsb0JBQW9CLENBQUNFLEtBRGxEO0FBRVBDLFVBQUFBLE1BQU0sRUFBRUgsb0JBQW9CLENBQUNHLE1BQXJCLEdBQThCSCxvQkFBb0IsQ0FBQ0UsS0FGcEQ7QUFHUEEsVUFBQUEsS0FBSyxFQUFFRixvQkFBb0IsQ0FBQ0UsS0FIckI7QUFJUEUsVUFBQUEsU0FBUyxFQUFFSixvQkFBb0IsQ0FBQ0k7QUFKekIsU0FBVDtBQU1EOztBQWIwRCxVQWNwREMsb0JBZG9ELEdBYzVCUixJQWQ0QixDQWNwRFEsb0JBZG9EOztBQWUzRCxVQUFJQSxvQkFBSixFQUEwQjtBQUN4QlAsUUFBQUEsTUFBTSxHQUFHO0FBQ1BHLFVBQUFBLEtBQUssRUFBRUksb0JBQW9CLENBQUNKLEtBQXJCLEdBQTZCSSxvQkFBb0IsQ0FBQ0gsS0FEbEQ7QUFFUEMsVUFBQUEsTUFBTSxFQUFFRSxvQkFBb0IsQ0FBQ0YsTUFBckIsR0FBOEJFLG9CQUFvQixDQUFDSCxLQUZwRDtBQUdQQSxVQUFBQSxLQUFLLEVBQUVHLG9CQUFvQixDQUFDSCxLQUhyQjtBQUlQRSxVQUFBQSxTQUFTLEVBQUVDLG9CQUFvQixDQUFDRDtBQUp6QixTQUFUO0FBTUQsT0FQRCxNQU9PLElBQUlOLE1BQU0sSUFBSSxJQUFkLEVBQW9CO0FBQ3pCQSxRQUFBQSxNQUFNLEdBQUdDLE1BQVQ7QUFDRDs7QUFFREwsTUFBQUEsVUFBVSxHQUFHO0FBQUNLLFFBQUFBLE1BQU0sRUFBTkEsTUFBRDtBQUFTRCxRQUFBQSxNQUFNLEVBQU5BO0FBQVQsT0FBYjs7QUFDQSxVQUFJTCxxQkFBSixFQUEyQjtBQUV6QkYsUUFBQUEsWUFBWSxDQUFDZSxJQUFiLENBQWtCLFFBQWxCLEVBQTRCWixVQUE1QjtBQUNELE9BSEQsTUFHTztBQUNMRCxRQUFBQSxxQkFBcUIsR0FBRyxJQUF4QjtBQUNEO0FBQ0Y7OztxQ0FVdUJjLEksRUFBZ0JDLE8sRUFBbUI7QUFDekQsOEJBQ0VELElBQUksS0FBSyxRQURYLEVBRUUsNENBRkYsRUFHRUEsSUFIRjtBQUtBaEIsTUFBQUEsWUFBWSxDQUFDa0IsV0FBYixDQUF5QkYsSUFBekIsRUFBK0JDLE9BQS9CO0FBQ0Q7Ozt3Q0FLMEJELEksRUFBZ0JDLE8sRUFBbUI7QUFDNUQsOEJBQ0VELElBQUksS0FBSyxRQURYLEVBRUUsbURBRkYsRUFHRUEsSUFIRjtBQUtBaEIsTUFBQUEsWUFBWSxDQUFDbUIsY0FBYixDQUE0QkgsSUFBNUIsRUFBa0NDLE9BQWxDO0FBQ0Q7Ozs7O0FBR0gsSUFBSUcsV0FBa0QsR0FDcERDLE1BQU0sQ0FBQ0MsZ0JBQVAsSUFDQUQsTUFBTSxDQUFDQyxnQkFBUCxDQUF3QkMsVUFEeEIsSUFFQUYsTUFBTSxDQUFDQyxnQkFBUCxDQUF3QkMsVUFBeEIsQ0FBbUNuQixVQUhyQzs7QUFJQSxJQUFJLENBQUNnQixXQUFMLEVBQWtCO0FBRWhCSSxpQ0FBc0JOLFdBQXRCLENBQ0UscUJBREYsRUFFRSxVQUFDTyxNQUFELEVBQStCO0FBQzdCckIsSUFBQUEsVUFBVSxDQUFDc0IsR0FBWCxDQUFlRCxNQUFmO0FBQ0QsR0FKSDs7QUFRQUwsRUFBQUEsV0FBVyxHQUFHTywwQkFBaUJDLFlBQWpCLEdBQWdDeEIsVUFBOUM7QUFDRDs7QUFFREEsVUFBVSxDQUFDc0IsR0FBWCxDQUFlTixXQUFmO0FBRUFTLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjFCLFVBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICcuLi92ZW5kb3IvZW1pdHRlci9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IFJDVERldmljZUV2ZW50RW1pdHRlciBmcm9tICcuLi9FdmVudEVtaXR0ZXIvUkNURGV2aWNlRXZlbnRFbWl0dGVyJztcbmltcG9ydCBOYXRpdmVEZXZpY2VJbmZvLCB7XG4gIHR5cGUgRGlzcGxheU1ldHJpY3MsXG4gIHR5cGUgRGltZW5zaW9uc1BheWxvYWQsXG59IGZyb20gJy4vTmF0aXZlRGV2aWNlSW5mbyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbnR5cGUgRGltZW5zaW9uc1ZhbHVlID0ge1xuICB3aW5kb3c/OiBEaXNwbGF5TWV0cmljcyxcbiAgc2NyZWVuPzogRGlzcGxheU1ldHJpY3MsXG4gIC4uLlxufTtcblxuY29uc3QgZXZlbnRFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xubGV0IGRpbWVuc2lvbnNJbml0aWFsaXplZCA9IGZhbHNlO1xubGV0IGRpbWVuc2lvbnM6IERpbWVuc2lvbnNWYWx1ZTtcblxuY2xhc3MgRGltZW5zaW9ucyB7XG4gIC8qKlxuICAgKiBOT1RFOiBgdXNlV2luZG93RGltZW5zaW9uc2AgaXMgdGhlIHByZWZmZXJlZCBBUEkgZm9yIFJlYWN0IGNvbXBvbmVudHMuXG4gICAqXG4gICAqIEluaXRpYWwgZGltZW5zaW9ucyBhcmUgc2V0IGJlZm9yZSBgcnVuQXBwbGljYXRpb25gIGlzIGNhbGxlZCBzbyB0aGV5IHNob3VsZFxuICAgKiBiZSBhdmFpbGFibGUgYmVmb3JlIGFueSBvdGhlciByZXF1aXJlJ3MgYXJlIHJ1biwgYnV0IG1heSBiZSB1cGRhdGVkIGxhdGVyLlxuICAgKlxuICAgKiBOb3RlOiBBbHRob3VnaCBkaW1lbnNpb25zIGFyZSBhdmFpbGFibGUgaW1tZWRpYXRlbHksIHRoZXkgbWF5IGNoYW5nZSAoZS5nXG4gICAqIGR1ZSB0byBkZXZpY2Ugcm90YXRpb24pIHNvIGFueSByZW5kZXJpbmcgbG9naWMgb3Igc3R5bGVzIHRoYXQgZGVwZW5kIG9uXG4gICAqIHRoZXNlIGNvbnN0YW50cyBzaG91bGQgdHJ5IHRvIGNhbGwgdGhpcyBmdW5jdGlvbiBvbiBldmVyeSByZW5kZXIsIHJhdGhlclxuICAgKiB0aGFuIGNhY2hpbmcgdGhlIHZhbHVlIChmb3IgZXhhbXBsZSwgdXNpbmcgaW5saW5lIHN0eWxlcyByYXRoZXIgdGhhblxuICAgKiBzZXR0aW5nIGEgdmFsdWUgaW4gYSBgU3R5bGVTaGVldGApLlxuICAgKlxuICAgKiBFeGFtcGxlOiBgY29uc3Qge2hlaWdodCwgd2lkdGh9ID0gRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpO2BcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRpbSBOYW1lIG9mIGRpbWVuc2lvbiBhcyBkZWZpbmVkIHdoZW4gY2FsbGluZyBgc2V0YC5cbiAgICogQHJldHVybnMge09iamVjdD99IFZhbHVlIGZvciB0aGUgZGltZW5zaW9uLlxuICAgKi9cbiAgc3RhdGljIGdldChkaW06IHN0cmluZyk6IE9iamVjdCB7XG4gICAgaW52YXJpYW50KGRpbWVuc2lvbnNbZGltXSwgJ05vIGRpbWVuc2lvbiBzZXQgZm9yIGtleSAnICsgZGltKTtcbiAgICByZXR1cm4gZGltZW5zaW9uc1tkaW1dO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gbmF0aXZlIGNvZGUgYnkgc2VuZGluZyB0aGVcbiAgICogZGlkVXBkYXRlRGltZW5zaW9ucyBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGRpbXMgU2ltcGxlIHN0cmluZy1rZXllZCBvYmplY3Qgb2YgZGltZW5zaW9ucyB0byBzZXRcbiAgICovXG4gIHN0YXRpYyBzZXQoZGltczogJFJlYWRPbmx5PHtba2V5OiBzdHJpbmddOiBhbnksIC4uLn0+KTogdm9pZCB7XG4gICAgLy8gV2UgY2FsY3VsYXRlIHRoZSB3aW5kb3cgZGltZW5zaW9ucyBpbiBKUyBzbyB0aGF0IHdlIGRvbid0IGVuY291bnRlciBsb3NzIG9mXG4gICAgLy8gcHJlY2lzaW9uIGluIHRyYW5zZmVycmluZyB0aGUgZGltZW5zaW9ucyAod2hpY2ggY291bGQgYmUgbm9uLWludGVnZXJzKSBvdmVyXG4gICAgLy8gdGhlIGJyaWRnZS5cbiAgICBsZXQge3NjcmVlbiwgd2luZG93fSA9IGRpbXM7XG4gICAgY29uc3Qge3dpbmRvd1BoeXNpY2FsUGl4ZWxzfSA9IGRpbXM7XG4gICAgaWYgKHdpbmRvd1BoeXNpY2FsUGl4ZWxzKSB7XG4gICAgICB3aW5kb3cgPSB7XG4gICAgICAgIHdpZHRoOiB3aW5kb3dQaHlzaWNhbFBpeGVscy53aWR0aCAvIHdpbmRvd1BoeXNpY2FsUGl4ZWxzLnNjYWxlLFxuICAgICAgICBoZWlnaHQ6IHdpbmRvd1BoeXNpY2FsUGl4ZWxzLmhlaWdodCAvIHdpbmRvd1BoeXNpY2FsUGl4ZWxzLnNjYWxlLFxuICAgICAgICBzY2FsZTogd2luZG93UGh5c2ljYWxQaXhlbHMuc2NhbGUsXG4gICAgICAgIGZvbnRTY2FsZTogd2luZG93UGh5c2ljYWxQaXhlbHMuZm9udFNjYWxlLFxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qge3NjcmVlblBoeXNpY2FsUGl4ZWxzfSA9IGRpbXM7XG4gICAgaWYgKHNjcmVlblBoeXNpY2FsUGl4ZWxzKSB7XG4gICAgICBzY3JlZW4gPSB7XG4gICAgICAgIHdpZHRoOiBzY3JlZW5QaHlzaWNhbFBpeGVscy53aWR0aCAvIHNjcmVlblBoeXNpY2FsUGl4ZWxzLnNjYWxlLFxuICAgICAgICBoZWlnaHQ6IHNjcmVlblBoeXNpY2FsUGl4ZWxzLmhlaWdodCAvIHNjcmVlblBoeXNpY2FsUGl4ZWxzLnNjYWxlLFxuICAgICAgICBzY2FsZTogc2NyZWVuUGh5c2ljYWxQaXhlbHMuc2NhbGUsXG4gICAgICAgIGZvbnRTY2FsZTogc2NyZWVuUGh5c2ljYWxQaXhlbHMuZm9udFNjYWxlLFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHNjcmVlbiA9PSBudWxsKSB7XG4gICAgICBzY3JlZW4gPSB3aW5kb3c7XG4gICAgfVxuXG4gICAgZGltZW5zaW9ucyA9IHt3aW5kb3csIHNjcmVlbn07XG4gICAgaWYgKGRpbWVuc2lvbnNJbml0aWFsaXplZCkge1xuICAgICAgLy8gRG9uJ3QgZmlyZSAnY2hhbmdlJyB0aGUgZmlyc3QgdGltZSB0aGUgZGltZW5zaW9ucyBhcmUgc2V0LlxuICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoJ2NoYW5nZScsIGRpbWVuc2lvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaW1lbnNpb25zSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgaGFuZGxlci4gU3VwcG9ydGVkIGV2ZW50czpcbiAgICpcbiAgICogLSBgY2hhbmdlYDogRmlyZXMgd2hlbiBhIHByb3BlcnR5IHdpdGhpbiB0aGUgYERpbWVuc2lvbnNgIG9iamVjdCBjaGFuZ2VzLiBUaGUgYXJndW1lbnRcbiAgICogICB0byB0aGUgZXZlbnQgaGFuZGxlciBpcyBhbiBvYmplY3Qgd2l0aCBgd2luZG93YCBhbmQgYHNjcmVlbmAgcHJvcGVydGllcyB3aG9zZSB2YWx1ZXNcbiAgICogICBhcmUgdGhlIHNhbWUgYXMgdGhlIHJldHVybiB2YWx1ZXMgb2YgYERpbWVuc2lvbnMuZ2V0KCd3aW5kb3cnKWAgYW5kXG4gICAqICAgYERpbWVuc2lvbnMuZ2V0KCdzY3JlZW4nKWAsIHJlc3BlY3RpdmVseS5cbiAgICovXG4gIHN0YXRpYyBhZGRFdmVudExpc3RlbmVyKHR5cGU6ICdjaGFuZ2UnLCBoYW5kbGVyOiBGdW5jdGlvbikge1xuICAgIGludmFyaWFudChcbiAgICAgIHR5cGUgPT09ICdjaGFuZ2UnLFxuICAgICAgJ1RyeWluZyB0byBzdWJzY3JpYmUgdG8gdW5rbm93biBldmVudDogXCIlc1wiJyxcbiAgICAgIHR5cGUsXG4gICAgKTtcbiAgICBldmVudEVtaXR0ZXIuYWRkTGlzdGVuZXIodHlwZSwgaGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuIGV2ZW50IGhhbmRsZXIuXG4gICAqL1xuICBzdGF0aWMgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlOiAnY2hhbmdlJywgaGFuZGxlcjogRnVuY3Rpb24pIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0eXBlID09PSAnY2hhbmdlJyxcbiAgICAgICdUcnlpbmcgdG8gcmVtb3ZlIGxpc3RlbmVyIGZvciB1bmtub3duIGV2ZW50OiBcIiVzXCInLFxuICAgICAgdHlwZSxcbiAgICApO1xuICAgIGV2ZW50RW1pdHRlci5yZW1vdmVMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKTtcbiAgfVxufVxuXG5sZXQgaW5pdGlhbERpbXM6ID8kUmVhZE9ubHk8e1trZXk6IHN0cmluZ106IGFueSwgLi4ufT4gPVxuICBnbG9iYWwubmF0aXZlRXh0ZW5zaW9ucyAmJlxuICBnbG9iYWwubmF0aXZlRXh0ZW5zaW9ucy5EZXZpY2VJbmZvICYmXG4gIGdsb2JhbC5uYXRpdmVFeHRlbnNpb25zLkRldmljZUluZm8uRGltZW5zaW9ucztcbmlmICghaW5pdGlhbERpbXMpIHtcbiAgLy8gU3Vic2NyaWJlIGJlZm9yZSBjYWxsaW5nIGdldENvbnN0YW50cyB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgbWlzcyBhbnkgdXBkYXRlcyBpbiBiZXR3ZWVuLlxuICBSQ1REZXZpY2VFdmVudEVtaXR0ZXIuYWRkTGlzdGVuZXIoXG4gICAgJ2RpZFVwZGF0ZURpbWVuc2lvbnMnLFxuICAgICh1cGRhdGU6IERpbWVuc2lvbnNQYXlsb2FkKSA9PiB7XG4gICAgICBEaW1lbnNpb25zLnNldCh1cGRhdGUpO1xuICAgIH0sXG4gICk7XG4gIC8vIENhbid0IHVzZSBOYXRpdmVEZXZpY2VJbmZvIGluIENvbXBvbmVudFNjcmlwdCBiZWNhdXNlIGl0IGRvZXMgbm90IHN1cHBvcnQgTmF0aXZlTW9kdWxlcyxcbiAgLy8gYnV0IGhhcyBuYXRpdmVFeHRlbnNpb25zIGluc3RlYWQuXG4gIGluaXRpYWxEaW1zID0gTmF0aXZlRGV2aWNlSW5mby5nZXRDb25zdGFudHMoKS5EaW1lbnNpb25zO1xufVxuXG5EaW1lbnNpb25zLnNldChpbml0aWFsRGltcyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGltZW5zaW9ucztcbiJdfQ==